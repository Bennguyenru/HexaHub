#! /usr/bin/env python
import os, re
from waf_dynamo import apidoc_extract_task
from BuildUtility import create_build_utility

def configure(conf):
    pass

def build(bld):
    build_util  = create_build_utility(bld.env)
    source = ['webview_null.cpp']

    if bld.env.PLATFORM in ('arm64-darwin', 'x86_64-ios', 'armv7-android'):
        source = ['webview_mobile.cpp']

    webview = bld.stlib(features = 'cxx',
                        includes = '.',
                        source = source,
                        install_path = build_util.get_library_path(),
                        target = 'webviewext')

    apidoc_extract_task(bld, ['webview_doc.h'])
