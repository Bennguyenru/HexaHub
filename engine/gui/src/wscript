#! /usr/bin/env python
import os
from waf_dynamo import dmsdk_add_files, apidoc_extract_task
from BuildUtility import create_build_utility

def configure(conf):
    pass

def build(bld):
    build_util = create_build_utility(bld.env)
    resource = bld.stlib(features = 'cxx ddf',
                         includes = '.',
                         source = 'gui.cpp gui_script.cpp',
                         install_path = build_util.get_library_path(),
                         target = 'gui')

    resource = bld.stlib(features = 'cxx ddf',
                         includes = '.',
                         source = 'gui_null.cpp',
                         install_path = build_util.get_library_path(),
                         target = 'gui_null')

    bld.recurse('test')

    # the dmsdk_add_files needs to be after a build group for some reason
    dmsdk_add_files(bld, '${PREFIX}/sdk/include/dmsdk', 'dmsdk')

    bld.install_files('${PREFIX}/include/gui', 'gui.h')
    bld.install_files('${PREFIX}/include/gui', 'gui_script.h')

    apidoc_extract_task(bld, ['gui_script.cpp'])
