#! /usr/bin/env python
import os
from BuildUtility import create_build_utility

def configure(conf):
    pass

def build(bld):
    build_util = create_build_utility(bld.env)
    script = bld.stlib(features = 'cxx ddf',
                       includes = '../proto .',
                       target = 'input',
                       source = bld.path.ant_glob('*.cpp') + bld.path.parent.ant_glob('proto/input/*'),
                       install_path = build_util.get_library_path(),
                       proto_gen_py = True,
                       protoc_includes = '../proto')

    bld.install_files('${PREFIX}/include/input', 'input.h')
    bld.install_files('${PREFIX}/share/proto', '../proto/input/input_ddf.proto')

    bld.recurse('test')
