#! /usr/bin/env python
import waflib.Options

from waf_dynamo import dmsdk_add_files

def configure(conf):
    pass

def build(bld):

    lib = bld.stlib(features = 'cxx c ddf',
                    includes = '.',
                    target   = 'platform',
                    source   = bld.path.ant_glob(['platform_window_glfw.cpp']))

    lib = bld.stlib(features = 'cxx c ddf',
                    includes = '.',
                    target   = 'platform_null',
                    source   = bld.path.ant_glob(['platform_window_null.cpp']))

    bld.add_group()

    bld.install_files('${PREFIX}/include/platform', 'platform_window.h')

    dmsdk_add_files(bld, '${PREFIX}/sdk/include/dmsdk', 'dmsdk')

    if not waflib.Options.options.skip_build_tests:
        bld.recurse('test')
