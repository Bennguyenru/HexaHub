#! /usr/bin/env python
from waf_dynamo import copy_file_task
import waflib.Options

def configure(conf):
    pass

def build(bld):

    texc_sources = bld.path.ant_glob("*.cpp")

    # The static library for the tests
    texc = bld.stlib(features = 'cxx cstaticlib',
                   source = texc_sources,
                   includes = ['.'],
                   target   = 'texc')

    texc_shared = bld.shlib(features     = 'cxx cshlib skip_asan',
                            source       = texc_sources,
                            includes     = ['.'],
                            target       = 'texc_shared',
                            use          = 'BASIS_ENCODER DLIB_NOASAN PROFILE_NULL_NOASAN')

    bld.install_files('${PREFIX}/include/texc', 'texc.h')

    bld.recurse('test')
