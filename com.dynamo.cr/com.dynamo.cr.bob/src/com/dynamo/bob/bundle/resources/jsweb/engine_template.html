<!doctype html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport"
    content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
<title>{{DEFOLD_APP_TITLE}}</title>
<link rel="stylesheet" type="text/css" href="{{DEFOLD_CSS}}">
</style>
{{{DEFOLD_DEV_HEAD}}}
</head>
<body>
    <div id="fb-root"></div>

    <div class="fullscreenControl">
        <span> <input class="fullscreen" type="button"
            value="Fullscreen" onclick="Module.requestFullScreen(0,0)">
        </span>
    </div>

    <div class="download_modal_container" id="defold_modal">
        <div
            class="download_modal_content absolute-centre splash_border"
            id="defold_splash">
            <div class="absolute-centre download_modal_content">
                <image class="splashImage" src="{{DEFOLD_SPLASH_IMAGE}}"></image>
                <div class="statusText">
                    <span id="defold_status" class="statusOffset">Downloading...</span>
                </div>
                <progress class="gradient" value="0" max="100"
                    id="defold_progress"></progress>
            </div>
        </div>
    </div>

    <div>
        <canvas class="application" id="canvas"
            oncontextmenu="event.preventDefault()"></canvas>
    </div>

    <script type='text/javascript'>
      var preloadModal = document.getElementById('defold_modal');
      var statusElement = document.getElementById('defold_status');
      var progressElement = document.getElementById('defold_progress');

      var SplashControl = {
        splashVisible: true,
        resizeTimeout: 0,

        onSetMessage: function(text) {
          statusElement.innerHTML = text;
        },

        onSetProgress: function(current, max) {
          if (progressElement) {
                progressElement.value = current;
                progressElement.max = max;
              }
        },

        onDismissSplash : function() {
          preloadModal.hidden = true;
          SplashControl.splashVisible = false;
          SplashControl.unregisterResizeHandler();
        },

        alignSplashScreen: function() {
          // React to changes in screen size here.
        },

      onWindowResize: function(evt) {
        clearTimeout(SplashControl.resizeTimeout);
        SplashControl.resizeTimeout = setTimeout(SplashControl.alignSplashScreen, 100);
      },

        registerResizeHandler : function() {
          window.addEventListener('resize', SplashControl.onWindowResize);
        },

        unregisterResizeHandler : function() {
          window.removeEventListener('resize', SplashControl.onWindowResize);
        }
      };

    </script>
    <script type='text/javascript' src="combine.js"></script>
    <script type='text/javascript' src="{{DEFOLD_MODULE_JS}}"></script>
    <script type='text/javascript'>
      SplashControl.alignSplashScreen();
      if (SplashControl.splashVisible) {
        SplashControl.registerResizeHandler();
      }
    </script>
    {{{DEFOLD_DEV_INLINE}}}
    <script type="text/javascript"
        src="//connect.facebook.net/en_US/sdk.js"></script>
    {{{DEFOLD_JS_INIT}}}
</body>
</html>
