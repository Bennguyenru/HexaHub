context:
    includes: ['{{dynamo_home}}/include', '{{dynamo_home}}/sdk/include']
    symbols: ["DefaultSoundDevice", "NullSoundDevice", "AudioDecoderWav", "CrashExt", "AudioDecoderStbVorbis",  "AudioDecoderTremolo", "WebViewExt", "AdTruthExt", "IAPExt", "IACExt", "PushExt", "FacebookExt"]

main: |
    #include <stdio.h>

    #if __cplusplus
    extern "C" {
    #endif

    {{#symbols}}
    void {{{.}}}();
    {{/symbols}}

    {{#ext.symbols}}
    void {{{.}}}();
    {{/ext.symbols}}

    #if __cplusplus
    }
    #endif

    void dmExportedSymbols() {
        {{#symbols}}
        {{{.}}}();
        {{/symbols}}
        {{#ext.symbols}}
        {{{.}}}();
        {{/ext.symbols}}
    }

    extern int engine_main(int argc, char* argv[]);

    int main(int argc, char *argv[])
    {
        return engine_main(argc, argv);
    }

    #ifdef DM_PLATFORM_ANDROID

    #if __cplusplus
    extern "C" {
    #endif

    struct android_app;
    extern void _glfwPreMain(struct android_app* state);
    extern void app_dummy();

    void android_main(struct android_app* state)
    {
        // Make sure glue isn't stripped.
        app_dummy();
        _glfwPreMain(state);
    }

    #if __cplusplus
    }
    #endif
    #endif


platforms:
  x86_64-osx:
    context:
        frameworks: ["Foundation", "AppKit", "Cocoa", "OpenGL", "OpenAL", "AGL", "IOKit", "Carbon", "CoreVideo"]
        engineLibs: ["engine", "webviewext", "adtruthext", "facebookext", "iapext", "pushext", "iacext", "record", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "lua", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "vpx", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/x86_64-darwin", "{{dynamo_home}}/ext/lib/x86_64-darwin"]
        defines:    ["DM_PLATFORM_OSX"]
        flags:      []
        linkFlags:  []
        libs:       []

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    allowedLibs: ["dtrace_dyld","AccountPolicyTranslation","alias\\.A","alias","apr-1\\.0","apr-1","aprutil-1\\.0","aprutil-1","archive\\.2","archive","ATCommandStudioDynamic","auditd\\.0","auditd","auto","AVFAudio","blas","BSDPClient\\.A","BSDPClient","bsm\\.0","bsm","bz2\\.1\\.0\\.5","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","cblas","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","clapack","cmph","com_err","compression","CoreStorage","CRFSuite","CRFSuite0\\.12","crypto\\.0\\.9\\.7","crypto\\.0\\.9\\.8","crypto\\.35","crypto","csfde","cups\\.2","cups","cupscgi\\.1","cupscgi","cupsimage\\.2","cupsimage","cupsmime\\.1","cupsmime","cupsppdc\\.1","cupsppdc","curl\\.3","curl\\.4","curl","curses","dbm","des425","DHCPServer\\.A","DHCPServer","DiagnosticMessagesClient","dl","dns_services","dtrace","ecpg\\.6\\.5","ecpg\\.6","ecpg","ecpg_compat\\.3\\.5","ecpg_compat\\.3","ecpg_compat","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","expat\\.1","expat","exslt\\.0","exslt","extension","f77lapack","ffi","form\\.5\\.4","form","Fosl_dynamic","gcc_s\\.1","gcc_s\\.10\\.4","gcc_s\\.10\\.5","germantok","gmalloc","gssapi_krb5","heimdal-asn1","hunspell-1\\.2\\.0\\.0\\.0","hunspell-1\\.2\\.0","hunspell-1\\.2","IASAuthReboot","IASUnifiedProgress","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","info","iodbc\\.2\\.1\\.18","iodbc\\.2","iodbc","iodbcinst\\.2\\.1\\.18","iodbcinst\\.2","iodbcinst","ipconfig","ipsec\\.A","ipsec","k5crypto","krb4","krb5","krb524","krb5support","ktrace","langid","lapack","lber","ldap","ldap_r","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mecab\\.1\\.0\\.0","mecab","mecabra","menu\\.5\\.4","menu","mx\\.A","mx","ncurses\\.5\\.4","ncurses\\.5","ncurses","netsnmp\\.15\\.1\\.2","netsnmp\\.15","netsnmp\\.25","netsnmp\\.5\\.2\\.1","netsnmp\\.5","netsnmp","netsnmpagent\\.25","netsnmpagent","netsnmphelpers\\.25","netsnmphelpers","netsnmpmibs\\.25","netsnmpmibs","netsnmptrapd\\.25","netsnmptrapd","network","objc\\.A","objc","odfde","odmodule","OpenScriptingUtil","pam\\.1","pam\\.2","pam","panel\\.5\\.4","panel","pcap\\.A","pcap","pcre\\.0","pcre","pcreposix\\.0","pcreposix","pgtypes\\.3\\.4","pgtypes\\.3","pgtypes","pmenergy","pmsample","poll","pq\\.5\\.6","pq\\.5","pq","prequelite","proc","pthread","python","python2\\.6","python2\\.7","QMIParserDynamic","quit","readline","resolv\\.9","resolv","rpcsvc","ruby\\.2\\.0\\.0","ruby\\.2\\.0","ruby","sandbox\\.1","sandbox","sasl2\\.2\\.0\\.1","sasl2\\.2\\.0\\.15","sasl2\\.2\\.0\\.21","sasl2\\.2\\.0\\.22","sasl2\\.2","sasl2","ScreenReader","spindump","sqlite3\\.0","sqlite3","ssl\\.0\\.9\\.7","ssl\\.0\\.9\\.8","ssl\\.35","ssl","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysmon","System\\.B","System\\.B_debug","System","System_debug","systemstats","tcl","tcl8\\.5","TelephonyUtilDynamic","termcap","ThaiTokenizer","tidy\\.A","tidy","tk","tk8\\.5","tls\\.6","tls","UniversalAccess","util","util1\\.0","xar\\.1","xar","xcselect","xml2\\.2","xml2","Xplugin\\.1","Xplugin","XSEvent","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.5","z\\.1","z","ssh-keychain","dispatch","system_pthread","cache","commonCrypto","compiler_rt","copyfile","corecrypto","dispatch","dyld","keymgr","kxld","launch","macho","mathCommon\\.A","mathCommon","quarantine","removefile","system_asl","system_blocks","system_c","system_configuration","system_coreservices","system_coretls","system_dnssd","system_info","system_kernel","system_m","system_malloc","system_network","system_networkextension","system_notify","system_platform","system_pthread","system_sandbox","system_secinit","system_trace","unc","unwind","xpc","AGL","AVFoundation","AVKit","Accelerate","Accounts","AddressBook","AppKit","AppKitScripting","AppleScriptKit","AppleScriptObjC","ApplicationServices","AudioToolbox","AudioUnit","AudioVideoBridging","Automator","CFNetwork","CalendarStore","Carbon","CloudKit","Cocoa","Collaboration","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMIDIServer","CoreMedia","CoreMediaIO","CoreServices","CoreTelephony","CoreText","CoreVideo","CoreWLAN","CryptoTokenKit","DVComponentGlue","DVDPlayback","DirectoryService","DiscRecording","DiscRecordingUI","DiskArbitration","DrawSprocket","EventKit","ExceptionHandling","FWAUserLib","FinderSync","ForceFeedback","Foundation","GLKit","GLUT","GSS","GameController","GameKit","GameplayKit","Hypervisor","ICADevices","IMServicePlugIn","IOBluetooth","IOBluetoothUI","IOKit","IOSurface","ImageCaptureCore","ImageIO","InputMethodKit","InstallerPlugins","InstantMessage","JavaFrameEmbedding","JavaScriptCore","JavaVM","Kerberos","Kernel","LDAP","LatentSemanticMapping","LocalAuthentication","MapKit","MediaAccessibility","MediaLibrary","MediaToolbox","Message","Metal","MetalKit","ModelIO","MultipeerConnectivity","NetFS","NetworkExtension","NotificationCenter","OSAKit","OpenAL","OpenCL","OpenDirectory","OpenGL","PCSC","Photos","PhotosUI","PreferencePanes","PubSub","Python","QTKit","Quartz","QuartzCore","QuickLook","QuickTime","Ruby","SceneKit","ScreenSaver","Scripting","ScriptingBridge","Security","SecurityFoundation","SecurityInterface","ServiceManagement","Social","SpriteKit","StoreKit","SyncServices","System","SystemConfiguration","TWAIN","Tcl","Tk","VideoDecodeAcceleration","VideoToolbox","WebKit","vecLib","vmnet"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","-W{{warning}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd: 'clang++ -c -arch x86_64 -target x86_64-apple-darwin11 -isysroot /opt/MacOSX.sdk/ -m64 -O2 -g -mmacosx-version-min=10.7 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch x86_64 -target x86_64-apple-darwin11 -isysroot /opt/MacOSX.sdk/ -m64 -O2 -g -mmacosx-version-min=10.7 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  x86-osx:
    context:
        frameworks: ["Foundation", "AppKit", "Cocoa", "OpenGL", "OpenAL", "AGL", "IOKit", "Carbon", "CoreVideo"]
        engineLibs: ["engine", "webviewext", "adtruthext", "facebookext", "iapext", "pushext", "iacext", "record", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "vpx", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/darwin", "{{dynamo_home}}/ext/lib/darwin"]
        defines:    ["DM_PLATFORM_OSX", "LUA_BYTECODE_ENABLE"]
        flags:      []
        linkFlags:  []
        libs:       []

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    allowedLibs: ["dtrace_dyld","AccountPolicyTranslation","alias\\.A","alias","apr-1\\.0","apr-1","aprutil-1\\.0","aprutil-1","archive\\.2","archive","ATCommandStudioDynamic","auditd\\.0","auditd","auto","AVFAudio","blas","BSDPClient\\.A","BSDPClient","bsm\\.0","bsm","bz2\\.1\\.0\\.5","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","cblas","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","clapack","cmph","com_err","compression","CoreStorage","CRFSuite","CRFSuite0\\.12","crypto\\.0\\.9\\.7","crypto\\.0\\.9\\.8","crypto\\.35","crypto","csfde","cups\\.2","cups","cupscgi\\.1","cupscgi","cupsimage\\.2","cupsimage","cupsmime\\.1","cupsmime","cupsppdc\\.1","cupsppdc","curl\\.3","curl\\.4","curl","curses","dbm","des425","DHCPServer\\.A","DHCPServer","DiagnosticMessagesClient","dl","dns_services","dtrace","ecpg\\.6\\.5","ecpg\\.6","ecpg","ecpg_compat\\.3\\.5","ecpg_compat\\.3","ecpg_compat","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","expat\\.1","expat","exslt\\.0","exslt","extension","f77lapack","ffi","form\\.5\\.4","form","Fosl_dynamic","gcc_s\\.1","gcc_s\\.10\\.4","gcc_s\\.10\\.5","germantok","gmalloc","gssapi_krb5","heimdal-asn1","hunspell-1\\.2\\.0\\.0\\.0","hunspell-1\\.2\\.0","hunspell-1\\.2","IASAuthReboot","IASUnifiedProgress","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","info","iodbc\\.2\\.1\\.18","iodbc\\.2","iodbc","iodbcinst\\.2\\.1\\.18","iodbcinst\\.2","iodbcinst","ipconfig","ipsec\\.A","ipsec","k5crypto","krb4","krb5","krb524","krb5support","ktrace","langid","lapack","lber","ldap","ldap_r","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mecab\\.1\\.0\\.0","mecab","mecabra","menu\\.5\\.4","menu","mx\\.A","mx","ncurses\\.5\\.4","ncurses\\.5","ncurses","netsnmp\\.15\\.1\\.2","netsnmp\\.15","netsnmp\\.25","netsnmp\\.5\\.2\\.1","netsnmp\\.5","netsnmp","netsnmpagent\\.25","netsnmpagent","netsnmphelpers\\.25","netsnmphelpers","netsnmpmibs\\.25","netsnmpmibs","netsnmptrapd\\.25","netsnmptrapd","network","objc\\.A","objc","odfde","odmodule","OpenScriptingUtil","pam\\.1","pam\\.2","pam","panel\\.5\\.4","panel","pcap\\.A","pcap","pcre\\.0","pcre","pcreposix\\.0","pcreposix","pgtypes\\.3\\.4","pgtypes\\.3","pgtypes","pmenergy","pmsample","poll","pq\\.5\\.6","pq\\.5","pq","prequelite","proc","pthread","python","python2\\.6","python2\\.7","QMIParserDynamic","quit","readline","resolv\\.9","resolv","rpcsvc","ruby\\.2\\.0\\.0","ruby\\.2\\.0","ruby","sandbox\\.1","sandbox","sasl2\\.2\\.0\\.1","sasl2\\.2\\.0\\.15","sasl2\\.2\\.0\\.21","sasl2\\.2\\.0\\.22","sasl2\\.2","sasl2","ScreenReader","spindump","sqlite3\\.0","sqlite3","ssl\\.0\\.9\\.7","ssl\\.0\\.9\\.8","ssl\\.35","ssl","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","sysmon","System\\.B","System\\.B_debug","System","System_debug","systemstats","tcl","tcl8\\.5","TelephonyUtilDynamic","termcap","ThaiTokenizer","tidy\\.A","tidy","tk","tk8\\.5","tls\\.6","tls","UniversalAccess","util","util1\\.0","xar\\.1","xar","xcselect","xml2\\.2","xml2","Xplugin\\.1","Xplugin","XSEvent","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.5","z\\.1","z","ssh-keychain","dispatch","system_pthread","cache","commonCrypto","compiler_rt","copyfile","corecrypto","dispatch","dyld","keymgr","kxld","launch","macho","mathCommon\\.A","mathCommon","quarantine","removefile","system_asl","system_blocks","system_c","system_configuration","system_coreservices","system_coretls","system_dnssd","system_info","system_kernel","system_m","system_malloc","system_network","system_networkextension","system_notify","system_platform","system_pthread","system_sandbox","system_secinit","system_trace","unc","unwind","xpc","AGL","AVFoundation","AVKit","Accelerate","Accounts","AddressBook","AppKit","AppKitScripting","AppleScriptKit","AppleScriptObjC","ApplicationServices","AudioToolbox","AudioUnit","AudioVideoBridging","Automator","CFNetwork","CalendarStore","Carbon","CloudKit","Cocoa","Collaboration","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMIDIServer","CoreMedia","CoreMediaIO","CoreServices","CoreTelephony","CoreText","CoreVideo","CoreWLAN","CryptoTokenKit","DVComponentGlue","DVDPlayback","DirectoryService","DiscRecording","DiscRecordingUI","DiskArbitration","DrawSprocket","EventKit","ExceptionHandling","FWAUserLib","FinderSync","ForceFeedback","Foundation","GLKit","GLUT","GSS","GameController","GameKit","GameplayKit","Hypervisor","ICADevices","IMServicePlugIn","IOBluetooth","IOBluetoothUI","IOKit","IOSurface","ImageCaptureCore","ImageIO","InputMethodKit","InstallerPlugins","InstantMessage","JavaFrameEmbedding","JavaScriptCore","JavaVM","Kerberos","Kernel","LDAP","LatentSemanticMapping","LocalAuthentication","MapKit","MediaAccessibility","MediaLibrary","MediaToolbox","Message","Metal","MetalKit","ModelIO","MultipeerConnectivity","NetFS","NetworkExtension","NotificationCenter","OSAKit","OpenAL","OpenCL","OpenDirectory","OpenGL","PCSC","Photos","PhotosUI","PreferencePanes","PubSub","Python","QTKit","Quartz","QuartzCore","QuickLook","QuickTime","Ruby","SceneKit","ScreenSaver","Scripting","ScriptingBridge","Security","SecurityFoundation","SecurityInterface","ServiceManagement","Social","SpriteKit","StoreKit","SyncServices","System","SystemConfiguration","TWAIN","Tcl","Tk","VideoDecodeAcceleration","VideoToolbox","WebKit","vecLib","vmnet"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","-W{{warning}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd: 'clang++ -c -arch i386 -target x86_64-apple-darwin11 -isysroot /opt/MacOSX.sdk/ -m32 -O2 -g -mmacosx-version-min=10.7 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch i386 -target x86_64-apple-darwin11 -isysroot /opt/MacOSX.sdk/ -m32 -O2 -g -mmacosx-version-min=10.7 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  arm64-ios:
    context:
        frameworks: ["Foundation", "OpenGLES", "OpenAL", "QuartzCore", "CoreGraphics", "AudioToolbox", "SystemConfiguration", "CoreVideo", "UIKit", "CoreTelephony", "StoreKit", "Security"]
        weakFrameworks: ["Accounts", "Social", "AdSupport"]
        engineLibs: ["engine", "webviewext", "adtruthext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "lua", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "liveupdate", "FBSDKCore", "FBSDKLogin", "FBSDKShare"]
        libPaths:   ["{{dynamo_home}}/lib/arm64-darwin", "{{dynamo_home}}/ext/lib/arm64-darwin"]
        defines:    ["DM_PLATFORM_IOS"]
        flags:      ['-fno-exceptions']
        linkFlags:  ['-fobjc-link-runtime', '-dead_strip']
        libs:       []

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    allowedLibs: ["CarrierBundleUtilities","IOABPLib","Accessibility","acmobileshim","afc","amsupport","AppPatch","archive\\.2","archive","assertion_launchd","authinstall","AWDProtobuf","AWDProtobufAWD","AWDProtobufBluetooth","AWDProtobufCATM","AWDProtobufFacetime","AWDProtobufFacetimeiMessage","AWDProtobufGCK","AWDProtobufLocation","AWDProtobufTelephony","AWDSupport","AWDSupportConfig","AWDSupportFramework","AWDSupportInfo","AXSafeCategoryBundle","AXSpeechManager","BasebandManager","BasebandPCI","BasebandUSB","BBUpdaterDynamic","bsm\\.0","bsm","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","cmph","compression","coreroutine","CRFSuite","CRFSuite0\\.12","CTLogHelper","CTWakeCommandParserDynamic","cupolicy","curses","dbm","DHCPServer\\.A","DHCPServer","dl","dns_services","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","ETLDIAGLoggingDynamic","ETLDLFDynamic","ETLDLOADCoreDumpDynamic","ETLDLOADDynamic","ETLDMCDynamic","ETLDynamic","ETLEFSDumpDynamic","ETLSAHDynamic","ETLTransportDynamic","exslt\\.0","exslt","extension","form\\.5\\.4","form","gcc_s\\.1","germantok","GestureServer","gll","H5Dynamic","HDLCDynamic","heimdal-asn1","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","InFieldCollection","info","IOAccessoryManager","ipconfig","ipsec\\.A","ipsec","langid","lockdown","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mav_ipc_router_dynamic","mecab_em","mecabra","mis","MobileCheckpoint","MobileGestalt","MobileGestaltExtensions","ncurses\\.5\\.4","ncurses","network","nfshared","objc\\.A","objc","omadm","poll","PPM","prequelite","proc","protobuf","pthread","QLCharts","resolv\\.9","resolv","rpcsvc","sandbox\\.1","sandbox","sp","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","System\\.B","System","TelephonyBasebandBulkUSBDynamic","TelephonyBasebandDynamic","TelephonyDebugDynamic","TelephonyIOKitDynamic","TelephonyPCIDynamic","TelephonyUSBDynamic","TelephonyUtilDynamic","ThaiTokenizer","tidy\\.A","tidy","tzupdate","util","util1\\.0","WAPI","xml2\\.2","xml2","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.5","z\\.1","z","AVFoundation","AVKit","Accelerate","Accounts","AdSupport","AddressBook","AddressBookUI","AssetsLibrary","AudioToolbox","AudioUnit","CFNetwork","CloudKit","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMedia","CoreMotion","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","EventKit","EventKitUI","ExternalAccessory","Foundation","GLKit","GSS","GameController","GameKit","GameplayKit","HealthKit","HealthKitUI","HomeKit","IOKit","ImageIO","JavaScriptCore","LocalAuthentication","MapKit","MediaAccessibility","MediaPlayer","MediaToolbox","MessageUI","Metal","MetalKit","MetalPerformanceShaders","MobileCoreServices","ModelIO","MultipeerConnectivity","NetworkExtension","NewsstandKit","NotificationCenter","OpenAL","OpenGLES","PassKit","Photos","PhotosUI","PushKit","QuartzCore","QuickLook","ReplayKit","SafariServices","SceneKit","Security","Social","SpriteKit","StoreKit","SystemConfiguration","Twitter","UIKit","VideoToolbox","WatchConnectivity","WatchKit","WebKit","iAd"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","-W{{warning}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd: 'clang++ -c -arch arm64 -target arm-apple-darwin11 -isysroot /opt/iPhoneOS9.3.sdk/ -m64 -O2 -g -miphoneos-version-min=6.0 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch arm64 -target arm-apple-darwin11 -isysroot /opt/iPhoneOS9.3.sdk/ -m64 -O2 -g -miphoneos-version-min=6.0 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#weakFrameworks}}-weak_framework {{{.}}} {{/weakFrameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  armv7-ios:
    context:
        frameworks: ["Foundation", "OpenGLES", "OpenAL", "QuartzCore", "CoreGraphics", "AudioToolbox", "SystemConfiguration", "CoreVideo", "UIKit", "CoreTelephony", "StoreKit", "Security"]
        weakFrameworks: ["Accounts", "Social", "AdSupport"]
        engineLibs: ["engine", "webviewext", "adtruthext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "tremolo", "liveupdate", "FBSDKCore", "FBSDKLogin", "FBSDKShare" ]
        libPaths:   ["{{dynamo_home}}/lib/armv7-darwin", "{{dynamo_home}}/ext/lib/armv7-darwin"]
        defines:    ["DM_PLATFORM_IOS", "LUA_BYTECODE_ENABLE"]
        flags:      ['-fno-exceptions']
        linkFlags:  ['-fobjc-link-runtime', '-dead_strip']
        libs:       []

    exePrefix: ''
    exeExt: ''
    shlibRe: 'lib(.+).dylib'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).*(\.cpp|\.c|\.cc|\.cxx|\.c\+\+|.mm|.m)'
    allowedLibs: ["CarrierBundleUtilities","IOABPLib","Accessibility","acmobileshim","afc","amsupport","AppPatch","archive\\.2","archive","assertion_launchd","authinstall","AWDProtobuf","AWDProtobufAWD","AWDProtobufBluetooth","AWDProtobufCATM","AWDProtobufFacetime","AWDProtobufFacetimeiMessage","AWDProtobufGCK","AWDProtobufLocation","AWDProtobufTelephony","AWDSupport","AWDSupportConfig","AWDSupportFramework","AWDSupportInfo","AXSafeCategoryBundle","AXSpeechManager","BasebandManager","BasebandPCI","BasebandUSB","BBUpdaterDynamic","bsm\\.0","bsm","bz2\\.1\\.0","bz2","c\\+\\+\\.1","c\\+\\+","c\\+\\+abi","c","charset\\.1\\.0\\.0","charset\\.1","charset","ChineseTokenizer","cmph","compression","coreroutine","CRFSuite","CRFSuite0\\.12","CTLogHelper","CTWakeCommandParserDynamic","cupolicy","curses","dbm","DHCPServer\\.A","DHCPServer","dl","dns_services","edit\\.2","edit\\.3\\.0","edit\\.3","edit","energytrace","ETLDIAGLoggingDynamic","ETLDLFDynamic","ETLDLOADCoreDumpDynamic","ETLDLOADDynamic","ETLDMCDynamic","ETLDynamic","ETLEFSDumpDynamic","ETLSAHDynamic","ETLTransportDynamic","exslt\\.0","exslt","extension","form\\.5\\.4","form","gcc_s\\.1","germantok","GestureServer","gll","H5Dynamic","HDLCDynamic","heimdal-asn1","iconv\\.2\\.4\\.0","iconv\\.2","iconv","icucore\\.A","icucore","InFieldCollection","info","IOAccessoryManager","ipconfig","ipsec\\.A","ipsec","langid","lockdown","lzma\\.5","lzma","m","marisa","Match\\.1","Match","mav_ipc_router_dynamic","mecab_em","mecabra","mis","MobileCheckpoint","MobileGestalt","MobileGestaltExtensions","ncurses\\.5\\.4","ncurses","network","nfshared","objc\\.A","objc","omadm","poll","PPM","prequelite","proc","protobuf","pthread","QLCharts","resolv\\.9","resolv","rpcsvc","sandbox\\.1","sandbox","sp","sqlite3\\.0","sqlite3","stdc\\+\\+\\.6\\.0\\.9","stdc\\+\\+\\.6","stdc\\+\\+","System\\.B","System","TelephonyBasebandBulkUSBDynamic","TelephonyBasebandDynamic","TelephonyDebugDynamic","TelephonyIOKitDynamic","TelephonyPCIDynamic","TelephonyUSBDynamic","TelephonyUtilDynamic","ThaiTokenizer","tidy\\.A","tidy","tzupdate","util","util1\\.0","WAPI","xml2\\.2","xml2","xslt\\.1","xslt","z\\.1\\.1\\.3","z\\.1\\.2\\.5","z\\.1","z","AVFoundation","AVKit","Accelerate","Accounts","AdSupport","AddressBook","AddressBookUI","AssetsLibrary","AudioToolbox","AudioUnit","CFNetwork","CloudKit","Contacts","ContactsUI","CoreAudio","CoreAudioKit","CoreBluetooth","CoreData","CoreFoundation","CoreGraphics","CoreImage","CoreLocation","CoreMIDI","CoreMedia","CoreMotion","CoreSpotlight","CoreTelephony","CoreText","CoreVideo","EventKit","EventKitUI","ExternalAccessory","Foundation","GLKit","GSS","GameController","GameKit","GameplayKit","HealthKit","HealthKitUI","HomeKit","IOKit","ImageIO","JavaScriptCore","LocalAuthentication","MapKit","MediaAccessibility","MediaPlayer","MediaToolbox","MessageUI","Metal","MetalKit","MetalPerformanceShaders","MobileCoreServices","ModelIO","MultipeerConnectivity","NetworkExtension","NewsstandKit","NotificationCenter","OpenAL","OpenGLES","PassKit","Photos","PhotosUI","PushKit","QuartzCore","QuickLook","ReplayKit","SafariServices","SceneKit","Security","Social","SpriteKit","StoreKit","SystemConfiguration","Twitter","UIKit","VideoToolbox","WatchConnectivity","WatchKit","WebKit","iAd"]
    allowedFlags: ["-ObjC","-ObjC++","-Wa,{{comma_separated_arg}}","-W{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","-W{{warning}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd: 'clang++ -c -arch armv7 -target arm-apple-darwin11 -isysroot /opt/iPhoneOS9.3.sdk/ -m32 -g -O2 -miphoneos-version-min=6.0 {{#defines}}-D{{{.}}} {{/defines}} {{#flags}}{{{.}}} {{/flags}} {{#ext.includes}}-I{{{.}}} {{/ext.includes}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#includes}}-I{{{.}}} {{/includes}} {{src}} -o{{tgt}}'
    linkCmd: 'clang++ -arch armv7 -target arm-apple-darwin11 -isysroot /opt/iPhoneOS9.3.sdk/ -m32 -g -O2 -miphoneos-version-min=6.0 -o {{tgt}} {{#linkFlags}}{{{.}}} {{/linkFlags}} {{#ext.libPaths}}-L{{{.}}} {{/ext.libPaths}} {{#libs}}-l{{{.}}} {{/libs}} {{#ext.libs}}-l{{{.}}} {{/ext.libs}} {{#ext.frameworkPaths}}-F{{{.}}} {{/ext.frameworkPaths}} {{#ext.frameworks}}-framework {{{.}}} {{/ext.frameworks}} {{#frameworks}}-framework {{{.}}} {{/frameworks}} {{#weakFrameworks}}-weak_framework {{{.}}} {{/weakFrameworks}} {{#libPaths}}-L{{{.}}} {{/libPaths}} {{#engineLibs}}-l{{{.}}} {{/engineLibs}} {{#src}}{{{.}}} {{/src}}'
    libCmd: 'llvm-ar rcs {{tgt}} {{#objs}}{{{.}}} {{/objs}}'

  armv7-android:
    context:
        engineJars: ["{{dynamo_home}}/ext/share/java/facebooksdk.jar", "{{dynamo_home}}/ext/share/java/bolts-android-1.2.0.jar", "{{dynamo_home}}/ext/share/java/google-play-services.jar", "{{dynamo_home}}/ext/share/java/android-support-v4.jar", "{{dynamo_home}}/ext/share/java/in-app-purchasing-2.0.61.jar", "{{dynamo_home}}/share/java/glfw_android.jar", "{{dynamo_home}}/share/java/facebook_android.jar", "{{dynamo_home}}/share/java/gamesys_android.jar", "{{dynamo_home}}/share/java/iap_android.jar", "{{dynamo_home}}/share/java/push_android.jar", "{{dynamo_home}}/share/java/adtruth_android.jar", "{{dynamo_home}}/share/java/sound_android.jar", "{{dynamo_home}}/share/java/webview_android.jar", "{{dynamo_home}}/share/java/iac_android.jar"]
        engineLibs: ["engine", "webviewext", "adtruthext", "facebookext", "iapext", "pushext", "iacext", "record_null", "gameobject", "ddf", "resource", "gamesys", "graphics", "physics", "BulletDynamics", "BulletCollision", "LinearMath", "Box2D", "render", "script", "luajit-5.1", "extension", "hid", "input", "particle", "rig", "dlib", "dmglfw", "gui", "tracking", "crashext", "sound", "openal_soft", "tremolo", "liveupdate"]
        libPaths:   ["{{dynamo_home}}/lib/armv7-android", "{{dynamo_home}}/ext/lib/armv7-android", "{{android_stl_lib}}"]
        defines:    ["DM_PLATFORM_ANDROID", "LUA_BYTECODE_ENABLE", "__ARM_ARCH_5__", "__ARM_ARCH_5T__", "__ARM_ARCH_5E__", "__ARM_ARCH_5TE__"]
        platformIncludes:   ["{{android_ndk_path}}/sources/android/native_app_glue", "{{android_ndk_path}}/sources/android/cpufeatures", "{{android_ndk_include}}", "{{android_stl_include}}", "{{android_stl_arch_include}}"]
        flags:      []
        linkFlags:  []
        libs:       []

    exePrefix: 'lib'
    exeExt: '.so'
    shlibRe: 'lib(.+).so'
    stlibRe: 'lib(.+).a'
    sourceRe: '(?i).+(\.cpp|\.c|\.cc|\.cxx|\.c\+\+)$'
    javaSourceRe: '(?i).+(\.java)$'
    allowedLibs: ["gnustl_static","supc\\+\\+","c","m","m_hard","stdc\\+\\+",]
    allowedFlags: ["-Wa,{{comma_separated_arg}}","-W{{warning}}","-ansi","--ansi","-std-default={{arg}}","-stdlib=(libstdc\\+\\+|libc\\+\\+)","-w","-std=(c89|c99|c\\+\\+0x|c\\+\\+11|c\\+\\+14|c\\+\\+17)","-Wp,{{comma_separated_arg}}","-W{{warning}}","--extra-warnings","--warn-{{warning}}","--warn-={{warning}}","-ferror-limit={{number}}","-O([0-4]?|fast|s|z)"]
    compileCmd: 'arm-linux-androideabi-g++ -c -g -gdwarf-2 -fpic -ffunction-sections -fstack-protector -Wno-psabi -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -fno-exceptions -funwind-tables --sysroot={{android_sysroot}} -DANDROID -Wa,--noexecstack {{#defines}}-D{{.}} {{/defines}} {{#ext.includes}}-I{{.}} {{/ext.includes}} {{#includes}}-I{{.}} {{/includes}} {{#platformIncludes}}-I{{.}} {{/platformIncludes}} {{src}} -o{{tgt}}'
    linkCmd: 'arm-linux-androideabi-g++ --sysroot={{android_sysroot}} -lEGL -lGLESv1_CM -lGLESv2 {{#src}}{{.}} {{/src}} -o {{tgt}} -Wl,-soname=libdmengine.so {{#defines}}-D{{.}} {{/defines}} -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,-z,noexecstack -landroid -fpic -z text {{#ext.libPaths}}-L{{.}} {{/ext.libPaths}} -Wl,-Bstatic -Wl,--start-group {{#ext.libs}}-l{{.}} {{/ext.libs}} -Wl,--end-group {{#libPaths}}-L{{.}} {{/libPaths}} -Wl,-Bstatic {{#engineLibs}}-l{{.}} {{/engineLibs}} -Wl,-Bdynamic -lOpenSLES -lgnustl_static -lm -llog -lc -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -shared'
    libCmd: 'arm-linux-androideabi-ar rcs {{tgt}} {{#objs}}{{.}} {{/objs}}'
    javacCmd: 'javac -source 1.6 -target 1.6 -classpath {{dynamo_home}}/ext/share/java/android-support-v4.jar:{{dynamo_home}}/ext/share/java/android.jar:{{classPath}} -d {{classesDir}} @{{sourcesListFile}}'
    jarCmd: 'jar cf {{outputJar}} -C {{classesDir}} .'
    dxCmd: 'dx --dex --output {{classes_dex}} {{#jars}}{{.}} {{/jars}} {{#engineJars}}{{.}} {{/engineJars}}'
